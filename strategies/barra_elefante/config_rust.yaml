# Configuração da Estratégia Barra Elefante para Rust Engine
# Este arquivo define TODOS os parâmetros e valores para otimização

strategy:
  name: "barra_elefante"
  description: "Estratégia que identifica barras de alta amplitude e volume"
  version: "2.0"

# Grid de parâmetros para otimização
# Cada parâmetro pode ter:
#   - values: lista de valores discretos
#   - range: [min, max, step] para valores contínuos
param_grid:
  # Parâmetros de detecção de barra elefante
  min_amplitude_mult:
    type: float
    values: [1.5, 2.0, 2.5, 3.0]
    description: "Multiplicador mínimo da amplitude em relação à média"
  
  min_volume_mult:
    type: float
    values: [1.3, 1.5, 2.0, 2.5]
    description: "Multiplicador mínimo do volume em relação à média"
  
  max_sombra_pct:
    type: float
    values: [0.3, 0.4, 0.5]
    description: "Percentual máximo de sombra permitido"
  
  lookback_amplitude:
    type: integer
    values: [10, 15, 20, 25, 30]
    description: "Períodos para calcular média móvel da amplitude"
  
  # Parâmetros de horário
  horario_inicio:
    type: integer
    values: [9, 10]
    description: "Hora de início das operações"
  
  minuto_inicio:
    type: integer
    values: [0]
    description: "Minuto de início das operações"
    fixed: true  # Valor fixo, não varia
  
  horario_fim:
    type: integer
    values: [12, 13, 14]
    description: "Hora de fim das operações"
  
  minuto_fim:
    type: integer
    values: [0]
    description: "Minuto de fim das operações"
    fixed: true
  
  horario_fechamento:
    type: integer
    values: [14]
    description: "Hora de fechamento forçado"
    fixed: true
  
  minuto_fechamento:
    type: integer
    values: [45]
    description: "Minuto de fechamento forçado"
    fixed: true
  
  # Parâmetros de gerenciamento de risco
  sl_atr_mult:
    type: float
    values: [1.5, 2.0, 2.5]
    description: "Multiplicador do ATR para Stop Loss"
  
  tp_atr_mult:
    type: float
    values: [2.0, 2.5, 3.0, 3.5]
    description: "Multiplicador do ATR para Take Profit"
  
  usar_trailing:
    type: boolean
    values: [true, false]
    description: "Usar trailing stop ou não"

# Configurações de execução
execution:
  # Número de combinações a testar (0 = todas)
  max_tests: 0
  
  # Randomizar ordem dos testes
  randomize: false
  
  # Batch size para processamento
  batch_size: 5000

# Metadados
metadata:
  author: "MacTester Team"
  created: "2025-11-08"
  last_modified: "2025-11-08"
  notes: |
    Esta configuração representa o grid completo da estratégia Barra Elefante.
    Total de combinações: 4 * 4 * 3 * 5 * 2 * 3 * 2 * 4 * 2 = 46,080 testes
    
    Para smoke test rápido, reduza os valores de cada parâmetro.

